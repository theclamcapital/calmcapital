<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Calm Capital | Institutional Wealth Preservation Strategy for India</title>
    <meta name="description" content="A comprehensive institutional guide to long-term wealth preservation for Indian investors. Mastering asset allocation, inflation hedging, and risk management." />
    <meta name="keywords" content="financial literacy india, asset allocation india, long term investing, risk management, wealth preservation, terms of service, privacy policy" />
    <meta name="author" content="The Calm Capital Project" />
    <meta name="robots" content="index, follow" />
    
    <!-- Performance Optimization: Preconnect to Critical CDNs -->
    <link rel="preconnect" href="https://cdn.tailwindcss.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://esm.sh">

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thecalmcapital.github.io/" />
    <meta property="og:title" content="The Calm Capital | Institutional Knowledge Archive" />
    <meta property="og:description" content="Institutional-grade financial knowledge hub focusing on clarity, structure, and risk awareness for Indian investors." />
    <meta property="og:image" content="https://ui-avatars.com/api/?name=Calm+Capital&background=0a0a0a&color=D4AF37&size=512" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400&family=Lora:ital,wght@0,400;0,500;0,600;1,400&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Babel (Defer for non-blocking parser) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" defer></script>

    <!-- Tailwind Config -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['"Playfair Display"', 'serif'],
              body: ['"Lora"', 'serif'],
              sans: ['"Inter"', 'sans-serif']
            },
            colors: {
              codex: {
                black: '#0a0a0a',      
                card: '#121212',       
                border: '#2a2a2a',     
                text: '#E5E5E5',       
                dim: '#A1A1AA',        
                gold: '#D4AF37',       
                goldDim: '#8a7020',    
                alert: '#7f1d1d'       
              }
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-out',
              'fade-in-up': 'fadeInUp 0.8s ease-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              fadeInUp: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>
    <style>
      body { background-color: #0a0a0a; color: #E5E5E5; }
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: #0a0a0a; }
      ::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 4px; }
      /* Ensure text is visible during font load */
      html { font-family: 'Inter', sans-serif; scroll-behavior: smooth; }
      p { margin-bottom: 1.5em; line-height: 1.8; white-space: pre-line; }
      .text-justify { text-align: justify; }
      .loading-spinner {
        border: 2px solid rgba(212, 175, 55, 0.1);
        border-left-color: #D4AF37;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        animation: spin 1s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>

    <!-- Import Map -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client?deps=react@18.2.0",
        "lucide-react": "https://esm.sh/lucide-react@0.263.1?deps=react@18.2.0",
        "framer-motion": "https://esm.sh/framer-motion@10.16.4?deps=react@18.2.0"
      }
    }
    </script>
</head>
<body>
    <div id="root"></div>

    <!-- MAIN APPLICATION SCRIPT -->
    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { motion, useScroll, useSpring } from 'framer-motion';
        import { 
          BookOpen, ShieldAlert, Scale, Landmark, ChevronRight, Menu, X, 
          Search, Book, User, Feather, FileText, Lock, Layers, Compass, Gavel, Clock, ArrowUp
        } from 'lucide-react';

        // We import content dynamically to speed up initial paint
        import { MODULES } from './content.js';

        // --- ICON MAPPING (Since we are importing strings from content.js) ---
        const IconMap = {
            Compass: Compass,
            Scale: Scale,
            BookOpen: BookOpen,
            Landmark: Landmark,
            ShieldAlert: ShieldAlert,
            Gavel: Gavel,
            Lock: Lock,
            User: User,
            Layers: Layers
        };

        // --- VISUALIZATION COMPONENTS ---

        const InflationDiagram = () => {
          const years = [0, 5, 10, 15, 20];
          const inflationRate = 0.06; 
          const data = years.map(y => ({
            year: y,
            value: 100 / Math.pow(1 + inflationRate, y)
          }));
          return (
            <div className="w-full p-8 bg-codex-card border-none rounded-sm mb-8">
              <div className="flex items-end justify-between h-64 px-4 relative">
                <div className="absolute inset-0 flex flex-col justify-between pointer-events-none opacity-10">
                     <div className="w-full h-px bg-white border-t border-dashed"></div>
                     <div className="w-full h-px bg-white border-t border-dashed"></div>
                     <div className="w-full h-px bg-white border-t border-dashed"></div>
                </div>
                {data.map((point, i) => (
                  <div key={i} className="flex flex-col items-center gap-4 z-10 w-1/5">
                     <div className="relative w-full flex justify-center items-end h-full">
                        <motion.div 
                          initial={{ height: 0 }}
                          whileInView={{ height: `${point.value}%` }}
                          viewport={{ once: true }}
                          transition={{ duration: 1, delay: i * 0.1 }}
                          className="w-16 bg-gradient-to-t from-codex-border to-codex-dim border-t-2 border-codex-gold relative group"
                        >
                           <div className="absolute -top-8 left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity text-codex-gold font-mono text-xs">
                             {Math.round(point.value)}%
                           </div>
                        </motion.div>
                        <div className="absolute bottom-[calc(100%+8px)] font-mono text-xs text-codex-dim opacity-70">
                            {Math.round(point.value)}%
                        </div>
                     </div>
                     <span className="font-sans text-[10px] text-codex-dim uppercase tracking-wider">Year {point.year}</span>
                  </div>
                ))}
              </div>
              <div className="text-center mt-4 text-xs font-mono text-codex-dim opacity-50">Fig 1. Purchasing Power Decay @ 6% CPI</div>
            </div>
          );
        };

        const AssetClassTable = () => {
            return (
                <div className="overflow-x-auto border border-codex-border rounded-sm mb-8">
                    <table className="w-full text-left text-sm font-sans">
                        <thead className="bg-codex-black text-codex-dim text-[10px] uppercase tracking-wider font-bold border-b border-codex-border">
                            <tr>
                                <th className="px-6 py-4">Asset Class</th>
                                <th className="px-6 py-4">Historical Role</th>
                                <th className="px-6 py-4">Primary Risk Vector</th>
                                <th className="px-6 py-4">Strategic Horizon</th>
                            </tr>
                        </thead>
                        <tbody className="divide-y divide-codex-border bg-codex-card text-codex-text">
                            <tr>
                                <td className="px-6 py-5 font-bold text-codex-gold">Public Equity</td>
                                <td className="px-6 py-5">Wealth Creation / Inflation Beat</td>
                                <td className="px-6 py-5 text-codex-dim">Valuation / Sentiment</td>
                                <td className="px-6 py-5 text-codex-dim">Long (&gt;7 Years)</td>
                            </tr>
                            <tr>
                                <td className="px-6 py-5 font-bold text-codex-gold">Fixed Income</td>
                                <td className="px-6 py-5">Capital Preservation / Income</td>
                                <td className="px-6 py-5 text-codex-dim">Interest Rate / Credit</td>
                                <td className="px-6 py-5 text-codex-dim">Medium (3-7 Years)</td>
                            </tr>
                            <tr>
                                <td className="px-6 py-5 font-bold text-codex-gold">Gold</td>
                                <td className="px-6 py-5">Currency Debasement Hedge</td>
                                <td className="px-6 py-5 text-codex-dim">Opportunity Cost / No Yield</td>
                                <td className="px-6 py-5 text-codex-dim">Generational</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            );
        };

        const CompoundingDiagram = () => {
             return (
            <div className="w-full p-12 bg-codex-card border-none rounded-sm flex flex-col md:flex-row gap-12 items-center justify-center mb-8">
                <div className="flex flex-col items-center">
                    <div className="w-40 h-40 relative flex items-center justify-center">
                         <div className="absolute w-20 h-20 rounded-full border border-codex-dim opacity-30"></div>
                         <div className="absolute w-28 h-28 rounded-full border border-codex-dim opacity-20"></div>
                         <div className="absolute w-36 h-36 rounded-full border border-codex-dim opacity-10"></div>
                         <span className="relative z-10 font-sans text-xs font-bold text-codex-dim tracking-widest uppercase">Linear</span>
                    </div>
                    <p className="text-[10px] text-codex-dim mt-4 text-center max-w-[150px] uppercase tracking-wider opacity-60">Simple Interest</p>
                </div>
                <div className="h-px w-24 bg-codex-border md:hidden"></div>
                <div className="w-px h-24 bg-codex-border hidden md:block"></div>
                <div className="flex flex-col items-center">
                    <div className="w-40 h-40 relative flex items-center justify-center">
                         <motion.div 
                            animate={{ scale: [1, 1.2, 1.5, 1.8] }}
                            transition={{ duration: 4, repeat: Infinity, ease: "easeIn" }}
                            className="absolute w-12 h-12 rounded-full bg-codex-gold/20 border border-codex-gold"
                         ></motion.div>
                         <span className="relative z-10 font-sans text-xs font-bold text-codex-gold bg-codex-card px-2 tracking-widest uppercase">Exponential</span>
                    </div>
                     <p className="text-[10px] text-codex-dim mt-4 text-center max-w-[150px] uppercase tracking-wider opacity-60">Compound Interest</p>
                </div>
            </div>
          );
        }

        const RiskReturnDiagram = () => {
          const levels = [
            { label: "Equities (Nifty 50)", risk: "High", desc: "Growth Potential / High Volatility" },
            { label: "Corporate Debt", risk: "Medium", desc: "Yield / Credit Risk" },
            { label: "Sovereign Bonds", risk: "Low", desc: "Safety / Inflation Risk" },
            { label: "Liquid Cash", risk: "Lowest", desc: "Liquidity / Purchasing Power Loss" },
          ];
          return (
            <div className="py-8 bg-codex-card mb-8">
                <div className="flex flex-col items-center gap-2">
                    {levels.map((lvl, i) => (
                        <div 
                            key={i}
                            className="flex items-center justify-between px-6 py-4 border border-codex-border bg-codex-black w-full max-w-2xl transition-all hover:border-codex-gold/50"
                            style={{ width: `${100 - (i * 10)}%` }}
                        >
                            <span className="font-serif text-codex-text text-lg">{lvl.label}</span>
                            <div className="text-right">
                                <span className="block text-[10px] uppercase font-bold text-codex-gold tracking-wider">{lvl.risk} Volatility</span>
                                <span className="block text-[10px] text-codex-dim italic">{lvl.desc}</span>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
          );
        };

        const VisualComponent = ({ type }) => {
            switch(type) {
                case 'inflation': return <InflationDiagram />;
                case 'assetClass': return <AssetClassTable />;
                case 'compounding': return <CompoundingDiagram />;
                case 'risk': return <RiskReturnDiagram />;
                default: return null;
            }
        };

        // --- READING PROGRESS COMPONENT ---
        
        const ReadingProgress = () => {
          const { scrollYProgress } = useScroll();
          const scaleX = useSpring(scrollYProgress, {
            stiffness: 100,
            damping: 30,
            restDelta: 0.001
          });
          return (
            <motion.div
              className="fixed top-0 left-0 right-0 h-1 bg-codex-gold z-50 origin-left"
              style={{ scaleX }}
            />
          );
        };

        // --- MAIN APP LOGIC ---

        const App = () => {
          const [activeModuleId, setActiveModuleId] = useState('home');
          const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
          const [scrolled, setScrolled] = useState(false);
          
          useEffect(() => {
            const handleHashChange = () => {
              const hash = window.location.hash.replace('#', '');
              if (hash && MODULES.some(m => m.id === hash)) {
                setActiveModuleId(hash);
              }
            };
            handleHashChange();
            window.addEventListener('hashchange', handleHashChange);
            return () => window.removeEventListener('hashchange', handleHashChange);
          }, []);

          useEffect(() => {
            const handleScroll = () => setScrolled(window.scrollY > 50);
            window.addEventListener('scroll', handleScroll);
            return () => window.removeEventListener('scroll', handleScroll);
          }, []);

          const handleModuleSelect = (id) => {
            window.location.hash = id;
            setActiveModuleId(id);
            window.scrollTo({ top: 0, behavior: 'instant' });
          };

          const activeModule = MODULES.find(m => m.id === activeModuleId) || MODULES[0];
          const ActiveIcon = IconMap[activeModule.icon] || Compass;

          useEffect(() => {
             document.title = `${activeModule.title} | The Calm Capital`;
          }, [activeModule]);

          return (
            <div className="min-h-screen bg-codex-black text-codex-text selection:bg-codex-gold/30">
              <ReadingProgress />
              
              {/* Sidebar Navigation */}
              <nav className="hidden lg:flex flex-col w-80 h-screen fixed left-0 top-0 bg-codex-black border-r border-codex-border z-20 no-print">
                <div className="p-8 border-b border-codex-border">
                  <h2 className="font-serif text-3xl text-codex-text tracking-tight cursor-pointer" onClick={() => handleModuleSelect('home')}>
                    The Calm<br/><span className="text-codex-gold">Capital</span>
                  </h2>
                  <p className="text-[10px] text-codex-dim mt-4 font-sans uppercase tracking-[0.2em]">Institutional Archive</p>
                </div>
                <div className="flex-1 overflow-y-auto py-6 px-4 space-y-2">
                  {MODULES.map((module) => {
                    const ModuleIcon = IconMap[module.icon] || Compass;
                    return (
                    <button
                      key={module.id}
                      onClick={() => handleModuleSelect(module.id)}
                      className={`w-full text-left px-4 py-4 rounded-sm transition-all duration-300 group flex items-center gap-3 border border-transparent ${activeModuleId === module.id ? 'bg-codex-card border-codex-border' : 'hover:bg-codex-card/50'}`}
                    >
                      <span className={`transition-colors ${activeModuleId === module.id ? 'text-codex-gold' : 'text-codex-dim'}`}>
                        <ModuleIcon className="w-5 h-5" />
                      </span>
                      <div className="flex flex-col">
                        <span className={`font-sans text-sm font-medium ${activeModuleId === module.id ? 'text-codex-text' : 'text-codex-dim'}`}>
                          {module.title}
                        </span>
                        {activeModuleId === module.id && <span className="text-[9px] text-codex-gold uppercase tracking-wider mt-1">Reading Now</span>}
                      </div>
                      {activeModuleId === module.id && <ChevronRight className="ml-auto w-4 h-4 text-codex-gold" />}
                    </button>
                  )})}
                </div>
              </nav>

              {/* Mobile Header */}
              <div className="lg:hidden fixed top-0 left-0 right-0 h-16 bg-codex-black border-b border-codex-border z-40 flex items-center justify-between px-6 no-print backdrop-blur-md bg-opacity-90">
                 <span className="font-serif text-lg text-codex-text">The Calm Capital</span>
                 <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="p-2 text-codex-text">
                   {mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}
                 </button>
              </div>

              {/* Mobile Menu */}
              {mobileMenuOpen && (
                <div className="fixed inset-0 z-30 bg-codex-black pt-20 px-6 animate-fade-in lg:hidden flex flex-col overflow-y-auto">
                   {MODULES.map((module) => (
                      <button
                        key={module.id}
                        onClick={() => { handleModuleSelect(module.id); setMobileMenuOpen(false); }}
                        className="text-left py-4 border-b border-codex-border text-lg font-serif text-codex-text flex items-center justify-between"
                      >
                        {module.title}
                        <ChevronRight className="w-5 h-5 text-codex-dim" />
                      </button>
                   ))}
                </div>
              )}

              {/* Main Content Area */}
              <main className="lg:pl-80 pt-16 lg:pt-0 w-full transition-all duration-500">
                <div className="max-w-4xl mx-auto px-6 py-12 md:py-24">
                  
                  {/* Meta Header */}
                  <div className="mb-12 flex items-center justify-between opacity-50 no-print border-b border-codex-border pb-4">
                     <div className="flex gap-4">
                        <div className="text-[10px] uppercase tracking-[0.2em] font-sans text-codex-dim">Updated: Oct 2023</div>
                        <div className="text-[10px] uppercase tracking-[0.2em] font-sans text-codex-dim flex items-center gap-1"><Clock size={10} /> {activeModule.readTime}</div>
                     </div>
                     <div className="text-[10px] uppercase tracking-[0.2em] font-sans text-right text-codex-dim">Ref: {activeModule.id.toUpperCase()}</div>
                  </div>

                  <article className="animate-fade-in-up">
                    <div className="mb-12">
                      <div className="flex items-center gap-3 mb-4">
                        <span className="text-xs font-bold tracking-[0.2em] text-codex-gold uppercase">Module {String(MODULES.findIndex(m => m.id === activeModule.id) + 1).padStart(2, '0')}</span>
                        <div className="h-px w-12 bg-codex-border"></div>
                      </div>
                      <h1 className="font-serif text-4xl md:text-6xl text-codex-text leading-tight mb-6">{activeModule.title}</h1>
                      <p className="font-body text-xl md:text-2xl text-codex-dim italic font-light leading-relaxed">{activeModule.subtitle}</p>
                    </div>

                    <div className="font-serif text-lg md:text-xl text-codex-text leading-loose mb-16 opacity-90 border-l-2 border-codex-gold pl-6">
                      {activeModule.content.openingContext}
                    </div>

                    {activeModule.content.visualType && (
                      <figure className="my-16 animate-fade-in">
                         <VisualComponent type={activeModule.content.visualType} />
                      </figure>
                    )}

                    <div className="my-16 space-y-20">
                       {activeModule.content.chapters.map((chapter, idx) => (
                         <section key={idx} className="relative">
                            <h3 className="font-sans text-lg font-bold uppercase tracking-widest text-codex-text mb-8 flex items-center gap-4">
                              <span className="w-8 h-8 rounded-full border border-codex-dim flex items-center justify-center text-xs text-codex-dim">{idx + 1}</span>
                              {chapter.heading}
                            </h3>
                            <div className="font-body text-lg md:text-xl text-codex-dim leading-loose space-y-6 text-justify">
                              {/* Using white-space: pre-line CSS on paragraph tags to handle newlines in data */}
                              <p>{chapter.body}</p>
                            </div>
                         </section>
                       ))}
                    </div>

                    <div className="grid md:grid-cols-2 gap-12 mb-16 pt-12 border-t border-codex-border bg-codex-card/30 p-8 rounded-sm">
                       <div>
                          <h4 className="font-sans text-xs font-bold uppercase tracking-widest text-codex-gold mb-4 flex items-center gap-2"><User size={14}/> Behavioral Dimension</h4>
                          <p className="font-body text-base text-codex-text leading-relaxed">{activeModule.content.behavioralDimension}</p>
                       </div>
                       <div>
                          <h4 className="font-sans text-xs font-bold uppercase tracking-widest text-codex-gold mb-4 flex items-center gap-2"><Layers size={14}/> Structural Limitations</h4>
                          <ul className="list-disc pl-5 space-y-3 marker:text-codex-gold text-codex-dim font-body text-base">
                            {activeModule.content.limitations.map((limit, idx) => <li key={idx} className="pl-2">{limit}</li>)}
                          </ul>
                       </div>
                    </div>

                    <div className="bg-codex-card p-6 md:p-10 rounded-sm border border-codex-border border-l-4 border-l-codex-alert my-12 relative overflow-hidden shadow-2xl">
                        <div className="absolute top-0 right-0 p-4 opacity-5">
                          <ShieldAlert size={120} className="text-codex-alert" />
                        </div>
                        <h4 className="font-sans text-xs font-bold uppercase tracking-widest text-codex-alert mb-4">Risk Awareness</h4>
                        <p className="font-sans text-sm md:text-base text-codex-dim leading-relaxed relative z-10 font-medium">
                        {activeModule.content.riskStatement}
                        </p>
                    </div>

                    <div className="mt-24 pt-8 border-t border-codex-border flex flex-col md:flex-row justify-between gap-4 text-xs font-sans text-codex-dim opacity-60">
                      <div><span className="font-bold uppercase tracking-wider block mb-1 text-codex-goldDim">Source Disclosure</span>{activeModule.content.source}</div>
                    </div>
                  </article>

                  <footer className="mt-32 text-center pb-20 no-print">
                    <div className="w-12 h-px bg-codex-gold mx-auto mb-8"></div>
                    <p className="font-serif italic text-codex-dim text-lg mb-8">"The preservation of capital requires the understanding of risk, not just the pursuit of return."</p>
                    <div className="flex justify-center gap-6 text-xs font-sans uppercase tracking-widest text-codex-dim">
                        <button onClick={() => handleModuleSelect('terms')} className="hover:text-codex-gold transition-colors">Terms & Disclaimer</button>
                        <button onClick={() => handleModuleSelect('privacy')} className="hover:text-codex-gold transition-colors">Privacy</button>
                    </div>
                  </footer>
                </div>
              </main>

              {/* Scroll to Top Button */}
              {scrolled && (
                <button 
                  onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                  className="fixed bottom-8 right-8 p-3 bg-codex-gold text-codex-black rounded-full shadow-lg hover:bg-white transition-colors z-50 animate-fade-in"
                >
                  <ArrowUp size={20} />
                </button>
              )}
            </div>
          );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
